<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Quantum Odyssey: A unified theory connecting ancient wisdom, quantum physics, consciousness, and human transcendence.">
    <meta name="keywords" content="quantum physics, consciousness, many-worlds interpretation, Copenhagen interpretation, ancient wisdom, evolution, transcendence">
    <meta name="author" content="SirFree33 | Quantum Odyssey Research Institute">
    
    <!-- Google AdSense with preconnect -->
    <link rel="preconnect" href="https://pagead2.googlesyndication.com">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2958343227558642" crossorigin="anonymous"></script>
    
    <title>Quantum Odyssey: The Unified Theory of Existence</title>
    
    <!-- Optimized Font Loading -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@300;400;500;600;700&family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@300;400&family=Playfair+Display:wght@400;500;600&family=Philosopher:wght@400;700&display=swap" rel="stylesheet">
    
    <!-- Font Awesome with preconnect -->
    <link rel="preconnect" href="https://cdnjs.cloudflare.com">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Particle.js with async loading -->
    <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js" async></script>
    
    <style>
        /* ===== PERFORMANCE OPTIMIZED STYLES ===== */
        :root {
            --quantum-abyss: #000510;
            --starlight-gold: #FFD700;
            --nebula-teal: #00F5FF;
            --consciousness-purple: #9D4EDD;
            --dark-matter: #0A0F1E;
            --quantum-field: #1A2036;
            --ancient-parchment: #F5E9D4;
            --transcendence-white: #F0F8FF;
            --quantum-glow: rgba(0, 245, 255, 0.2);
            --gold-glow: rgba(255, 215, 0, 0.2);
            --purple-glow: rgba(157, 78, 221, 0.2);
            --cosmic-border: rgba(0, 245, 255, 0.4);
            --quantum-gradient: linear-gradient(135deg, var(--quantum-abyss) 0%, var(--dark-matter) 50%, var(--quantum-field) 100%);
            --header-height: 80px;
        }
        
        /* ===== CRITICAL CSS - RENDER BLOCKING ===== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        
        html {
            scroll-behavior: smooth;
            scroll-padding-top: var(--header-height);
        }
        
        body {
            font-family: 'Inter', sans-serif;
            line-height: 1.6;
            color: var(--ancient-parchment);
            background: var(--quantum-gradient);
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
            padding-top: var(--header-height);
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        body.loaded {
            opacity: 1;
        }
        
        /* ===== OPTIMIZED NAVIGATION ===== */
        .celestial-navigation {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: var(--header-height);
            background: rgba(10, 15, 30, 0.98);
            backdrop-filter: blur(15px);
            z-index: 1000;
            border-bottom: 1px solid var(--cosmic-border);
            box-shadow: 0 5px 30px rgba(0, 0, 0, 0.5);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            will-change: transform, background, height;
            transform: translateZ(0);
            -webkit-backface-visibility: hidden;
            backface-visibility: hidden;
        }
        
        .celestial-navigation.scrolled {
            height: 70px;
            background: rgba(10, 15, 30, 0.99);
        }
        
        .navigation-container {
            max-width: 1600px;
            width: 100%;
            margin: 0 auto;
            padding: 0 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            height: 100%;
        }
        
        .quantum-logo {
            font-family: 'Philosopher', serif;
            font-size: 2.2rem;
            font-weight: 700;
            background: linear-gradient(45deg, var(--nebula-teal), var(--starlight-gold));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            text-decoration: none;
            letter-spacing: 0.5px;
            transition: transform 0.3s ease;
        }
        
        .quantum-logo:hover {
            transform: scale(1.02);
        }
        
        .cosmic-compass {
            display: flex;
            gap: 0.8rem;
        }
        
        .nav-star {
            position: relative;
            padding: 0.7rem 1.5rem;
            color: var(--ancient-parchment);
            text-decoration: none;
            font-weight: 500;
            font-size: 0.95rem;
            letter-spacing: 0.8px;
            border-radius: 25px;
            border: 1px solid transparent;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
            transform: translateZ(0);
            will-change: transform, color, background;
        }
        
        .nav-star::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, var(--quantum-field), rgba(157, 78, 221, 0.1));
            border-radius: 25px;
            opacity: 0;
            transition: opacity 0.3s ease;
            z-index: -1;
        }
        
        .nav-star:hover {
            color: var(--nebula-teal);
            transform: translateY(-2px);
            border-color: var(--nebula-teal);
        }
        
        .nav-star:hover::before {
            opacity: 1;
        }
        
        .nav-star.active {
            background: linear-gradient(135deg, var(--quantum-field), rgba(157, 78, 221, 0.2));
            color: var(--starlight-gold);
            border-color: rgba(255, 215, 0, 0.3);
        }
        
        /* ===== OPTIMIZED INTERACTIVE ELEMENTS ===== */
        .timeline-content,
        .quantum-insight,
        .interpretation-card,
        .feature-item,
        .mastery-manual,
        .cosmic-ad-container {
            transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
            transform: translateZ(0);
            will-change: transform, box-shadow, border-color;
            -webkit-backface-visibility: hidden;
            backface-visibility: hidden;
        }
        
        .timeline-content:hover,
        .quantum-insight:hover,
        .interpretation-card:hover,
        .feature-item:hover,
        .cosmic-ad-container:hover {
            transform: translateY(-4px);
            box-shadow: 0 15px 40px rgba(0, 245, 255, 0.15);
            border-color: var(--nebula-teal);
        }
        
        /* ===== OPTIMIZED LINKS ===== */
        .table-link,
        .footer-link,
        .portal-button,
        .ko-fi-button {
            display: inline-flex;
            align-items: center;
            text-decoration: none;
            transition: all 0.2s ease;
            transform: translateZ(0);
            will-change: transform, background, color;
        }
        
        .table-link {
            padding: 0.5rem 1rem;
            background: rgba(0, 245, 255, 0.1);
            border-radius: 6px;
            color: var(--nebula-teal);
            font-size: 0.95rem;
            gap: 0.5rem;
        }
        
        .table-link:hover {
            background: rgba(0, 245, 255, 0.2);
            transform: translateY(-2px);
        }
        
        .portal-button {
            padding: 1rem 2.5rem;
            background: linear-gradient(45deg, var(--nebula-teal), var(--starlight-gold));
            color: var(--quantum-abyss);
            border-radius: 50px;
            font-weight: 700;
            font-size: 1.1rem;
            box-shadow: 0 8px 25px rgba(0, 245, 255, 0.3);
        }
        
        .portal-button:hover {
            transform: translateY(-4px) scale(1.05);
            box-shadow: 0 15px 40px rgba(255, 215, 0, 0.4);
        }
        
        /* ===== OPTIMIZED AD CONTAINERS ===== */
        .cosmic-ad-container {
            background: linear-gradient(135deg, rgba(10, 15, 30, 0.9), rgba(26, 32, 54, 0.9));
            border-radius: 10px;
            padding: 1rem;
            margin: 2rem auto;
            text-align: center;
            border: 1px solid rgba(0, 245, 255, 0.2);
            max-width: 800px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 90px;
        }
        
        .google-ad-banner {
            width: 100%;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 6px;
            padding: 0.8rem;
            margin: 2rem auto;
            text-align: center;
            border: 1px solid rgba(0, 245, 255, 0.1);
            min-height: 60px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
        
        /* ===== OPTIMIZED ANIMATIONS ===== */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .fade-in {
            animation: fadeInUp 0.6s ease forwards;
        }
        
        /* ===== OPTIMIZED TIMELINE ===== */
        .timeline-item {
            opacity: 0;
            transform: translateY(30px);
            transition: all 0.6s ease;
        }
        
        .timeline-item.visible {
            opacity: 1;
            transform: translateY(0);
        }
        
        /* ===== RESPONSIVE OPTIMIZATIONS ===== */
        @media (max-width: 1024px) {
            .cosmic-compass {
                display: none;
            }
            
            .mobile-menu-toggle {
                display: block;
            }
            
            .cosmic-compass.mobile-active {
                display: flex;
                flex-direction: column;
                position: absolute;
                top: var(--header-height);
                left: 0;
                width: 100%;
                background: rgba(10, 15, 30, 0.99);
                backdrop-filter: blur(20px);
                padding: 1.5rem;
                border-bottom: 1px solid var(--cosmic-border);
                box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            }
            
            .nav-star {
                padding: 1rem 1.5rem;
                justify-content: center;
            }
            
            .cosmic-manifesto {
                font-size: 3.5rem !important;
            }
        }
        
        @media (max-width: 768px) {
            .quantum-logo {
                font-size: 1.8rem;
            }
            
            .cosmic-manifesto {
                font-size: 2.8rem !important;
            }
            
            .portal-subtitle {
                font-size: 1.2rem !important;
            }
            
            .cosmic-ad-container {
                margin: 1rem auto;
                padding: 0.8rem;
            }
        }
        
        /* ===== FAST CLICK HANDLING ===== */
        .fast-click {
            cursor: pointer;
            user-select: none;
        }
        
        /* ===== CONTENT VISIBILITY OPTIMIZATION ===== */
        .content-visibility-auto {
            content-visibility: auto;
            contain-intrinsic-size: 0 500px;
        }
    </style>
</head>
<body>
    <!-- Quantum Cosmos Canvas -->
    <div id="quantum-cosmos"></div>
    
    <!-- Scroll Progress -->
    <div class="scroll-progress"></div>
    
    <!-- Optimized Navigation -->
    <nav class="celestial-navigation">
        <div class="navigation-container">
            <a href="#portal" class="quantum-logo">Quantum Odyssey</a>
            <button class="mobile-menu-toggle" id="mobileMenuToggle" aria-label="Toggle menu">
                <i class="fas fa-bars"></i>
            </button>
            <div class="cosmic-compass" id="navCompass">
                <a href="#portal" class="nav-star active"><i class="fas fa-home"></i> Portal</a>
                <a href="#primordial" class="nav-star"><i class="fas fa-atom"></i> Primordial</a>
                <a href="#evolution" class="nav-star"><i class="fas fa-dna"></i> Evolution</a>
                <a href="#consciousness" class="nav-star"><i class="fas fa-brain"></i> Consciousness</a>
                <a href="#interpretations" class="nav-star"><i class="fas fa-cogs"></i> Interpretations</a>
                <a href="#mastery" class="nav-star"><i class="fas fa-crown"></i> Mastery</a>
                <a href="#library" class="nav-star"><i class="fas fa-book"></i> Library</a>
            </div>
        </div>
    </nav>
    
    <!-- Grand Cosmic Portal -->
    <section id="portal" class="grand-cosmic-portal content-visibility-auto">
        <div class="portal-content">
            <h1 class="cosmic-manifesto" style="font-size: 4.5rem; font-family: 'Philosopher', serif; color: transparent; background: linear-gradient(45deg, var(--nebula-teal), var(--starlight-gold), var(--consciousness-purple)); -webkit-background-clip: text; background-clip: text; margin-bottom: 1.5rem;">Quantum Odyssey</h1>
            <p class="portal-subtitle" style="font-size: 1.4rem; max-width: 900px; margin: 0 auto 2.5rem; opacity: 0.9; font-family: 'Cormorant Garamond', serif; font-style: italic;">
                Where Ancient Wisdom Converges with Quantum Physics, Revealing the Unified Fabric 
                of Consciousness, Existence, and Transcendence.
            </p>
            <div style="width: 300px; height: 2px; background: linear-gradient(90deg, transparent, var(--nebula-teal), var(--starlight-gold), var(--nebula-teal), transparent); margin: 3rem auto;"></div>
        </div>
        <div class="cosmic-invitation" style="position: absolute; bottom: 3rem; left: 50%; transform: translateX(-50%); color: var(--nebula-teal); text-align: center;">
            <div style="letter-spacing: 2.5px; font-size: 0.9rem;">Begin Your Quantum Journey</div>
            <div style="font-size: 1.5rem; margin-top: 0.5rem; animation: bounce 2s infinite;">↓</div>
        </div>
    </section>

    <!-- AD BANNER 1 -->
    <div class="google-ad-banner" style="max-width: 1400px;">
        <div style="font-size: 0.75rem; color: #95a5a6; letter-spacing: 1px; margin-bottom: 0.3rem;">Community Message</div>
        <p style="font-size: 0.9rem; color: var(--ancient-parchment); opacity: 0.8; margin: 0;">
            This site is supported by readers like you. Consider sharing this knowledge.
        </p>
    </div>
    
    <!-- Timeline Section -->
    <section class="quantum-timeline content-visibility-auto">
        <div class="cosmic-chapter" style="background: rgba(10, 15, 30, 0.85); backdrop-filter: blur(20px); border-radius: 20px; padding: 4rem; margin: 2rem auto; max-width: 1400px; border: 1px solid var(--cosmic-border);">
            <div style="display: flex; align-items: flex-start; gap: 2rem; margin-bottom: 3rem;">
                <div style="font-size: 3.5rem; min-width: 90px; height: 90px; border-radius: 50%; display: flex; align-items: center; justify-content: center; background: linear-gradient(135deg, var(--quantum-field), var(--dark-matter)); border: 2px solid var(--nebula-teal);">⏳</div>
                <div>
                    <h2 style="font-family: 'Philosopher', serif; font-size: 3.2rem; color: var(--starlight-gold); margin-bottom: 0.8rem;">Quantum Timeline of Wisdom</h2>
                    <p style="font-size: 1.3rem; color: var(--nebula-teal); border-left: 2px solid var(--nebula-teal); padding-left: 1.2rem;">The Convergence of Ancient Insight and Modern Science</p>
                </div>
            </div>
            
            <!-- Timeline items here (truncated for brevity) -->
            <div class="timeline-item fade-in">
                <div style="flex: 0 0 150px; text-align: center;">
                    <div style="width: 120px; height: 120px; border-radius: 50%; background: linear-gradient(135deg, var(--quantum-field), var(--dark-matter)); border: 3px solid var(--nebula-teal); display: flex; flex-direction: column; align-items: center; justify-content: center; margin: 0 auto;">
                        <div style="font-size: 1.8rem; color: var(--starlight-gold); font-weight: 700;">2100 BCE</div>
                        <div style="font-size: 0.8rem; color: var(--nebula-teal); margin-top: 0.3rem;">Mesopotamia</div>
                    </div>
                </div>
                <div class="timeline-content" style="flex: 1; padding: 2rem; background: linear-gradient(135deg, rgba(10, 15, 30, 0.95), rgba(26, 32, 54, 0.95)); backdrop-filter: blur(15px); border-radius: 15px; border: 1px solid var(--cosmic-border);">
                    <h3 style="font-size: 1.5rem; color: var(--nebula-teal); margin-bottom: 1rem; font-family: 'Cormorant Garamond', serif;">Epic of Gilgamesh</h3>
                    <p>The world's oldest known epic poem explores mortality, immortality, and the search for eternal life, mirroring quantum quests to understand consciousness beyond physical death.</p>
                </div>
            </div>
        </div>
    </section>
    
    <!-- AD BANNER 2 -->
    <div class="cosmic-ad-container" style="max-width: 1400px;">
        <div class="ad-label" style="font-size: 0.9rem; color: var(--starlight-gold); letter-spacing: 2.5px; margin-bottom: 0.5rem; display: flex; align-items: center; gap: 0.6rem;"><i class="fas fa-brain"></i> Consciousness Research</div>
        <div class="ad-content">
            <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2958343227558642" crossorigin="anonymous"></script>
            <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-2958343227558642" data-ad-slot="YOUR_SECOND_AD_SLOT_ID" data-ad-format="auto"></ins>
            <script>(adsbygoogle = window.adsbygoogle || []).push({});</script>
        </div>
    </div>
    
    <!-- Remaining sections follow similar optimized structure -->
    <!-- Due to length, I'll show the optimized JavaScript and remaining structure -->
    
    <!-- Back to Top Button -->
    <a href="#" class="back-to-portal" style="position: fixed; bottom: 2.5rem; right: 2.5rem; width: 55px; height: 55px; background: var(--quantum-field); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: var(--starlight-gold); text-decoration: none; font-size: 1.6rem; box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3); transition: all 0.3s ease; z-index: 999; opacity: 0; border: 1px solid var(--cosmic-border);"><i class="fas fa-arrow-up"></i></a>
    
    <!-- Footer -->
    <footer class="quantum-footer" style="background: rgba(10, 15, 30, 0.95); padding: 5rem 2rem 3rem; margin-top: 7rem; border-top: 2px solid var(--cosmic-border);">
        <div style="max-width: 1400px; margin: 0 auto; text-align: center;">
            <p style="font-family: 'Cormorant Garamond', serif; font-size: 2.2rem; color: var(--starlight-gold); margin-bottom: 3.5rem; font-style: italic; max-width: 900px; margin-left: auto; margin-right: auto;">
                "We are not human beings having a spiritual experience. We are spiritual beings having a human experience."
            </p>
            <div class="cosmic-copyright" style="margin-top: 3.5rem; color: var(--ancient-parchment); font-size: 0.95rem; opacity: 0.7;">
                © Quantum Odyssey Research Institute | Original synthesis by <span style="color: var(--starlight-gold); font-weight: 600;">SirFree33</span>
            </div>
        </div>
    </footer>

    <!-- OPTIMIZED JAVASCRIPT -->
    <script>
        // ===== QUANTUM ODYSSEY OPTIMIZED SCRIPT =====
        (function() {
            'use strict';
            
            // Cache DOM elements
            let cachedElements = {};
            
            // Fast element getter with caching
            function $(selector, forceRefresh = false) {
                if (!cachedElements[selector] || forceRefresh) {
                    cachedElements[selector] = document.querySelector(selector);
                }
                return cachedElements[selector];
            }
            
            function $$(selector, forceRefresh = false) {
                const cacheKey = selector + '_all';
                if (!cachedElements[cacheKey] || forceRefresh) {
                    cachedElements[cacheKey] = document.querySelectorAll(selector);
                }
                return cachedElements[cacheKey];
            }
            
            // Initialize Quantum Universe
            function initQuantumUniverse() {
                // Mark body as loaded
                document.body.classList.add('loaded');
                
                // Initialize systems
                initNavigation();
                initTimeline();
                initInteractions();
                initParticles();
                initScrollEffects();
                
                // Initialize AdSense with optimized timing
                setTimeout(() => {
                    if (window.adsbygoogle) {
                        (adsbygoogle = window.adsbygoogle || []).push({});
                    }
                }, 1000);
                
                // Log initialization
                console.log('⚛️ Quantum Odyssey initialized with optimized performance');
            }
            
            // ===== OPTIMIZED NAVIGATION =====
            function initNavigation() {
                const nav = $('.celestial-navigation');
                const navStars = $$('.nav-star');
                const mobileToggle = $('#mobileMenuToggle');
                const navCompass = $('#navCompass');
                const backToTop = $('.back-to-portal');
                
                // Fast scroll handler
                function scrollToSection(e) {
                    if (e.preventDefault) e.preventDefault();
                    
                    const targetId = this.getAttribute('href');
                    if (targetId === '#portal') {
                        window.scrollTo({ top: 0, behavior: 'smooth' });
                        return;
                    }
                    
                    const target = $(targetId);
                    if (target) {
                        const yOffset = -80;
                        const y = target.getBoundingClientRect().top + window.pageYOffset + yOffset;
                        window.scrollTo({ top: y, behavior: 'smooth' });
                    }
                    
                    // Close mobile menu if open
                    if (navCompass.classList.contains('mobile-active')) {
                        navCompass.classList.remove('mobile-active');
                    }
                }
                
                // Add event listeners with passive option
                navStars.forEach(star => {
                    star.addEventListener('click', scrollToSection, { passive: false });
                    star.classList.add('fast-click');
                });
                
                // Mobile menu toggle
                if (mobileToggle) {
                    mobileToggle.addEventListener('click', (e) => {
                        e.stopPropagation();
                        navCompass.classList.toggle('mobile-active');
                    }, { passive: true });
                }
                
                // Close mobile menu on outside click
                document.addEventListener('click', (e) => {
                    if (!nav.contains(e.target) && navCompass.classList.contains('mobile-active')) {
                        navCompass.classList.remove('mobile-active');
                    }
                }, { passive: true });
                
                // Back to top
                if (backToTop) {
                    backToTop.addEventListener('click', (e) => {
                        e.preventDefault();
                        window.scrollTo({ top: 0, behavior: 'smooth' });
                    }, { passive: false });
                }
                
                // Scroll handler with throttling
                let scrollTimer;
                window.addEventListener('scroll', () => {
                    if (scrollTimer) return;
                    
                    scrollTimer = requestAnimationFrame(() => {
                        // Update header
                        if (window.scrollY > 50) {
                            nav.classList.add('scrolled');
                        } else {
                            nav.classList.remove('scrolled');
                        }
                        
                        // Update back to top
                        if (backToTop) {
                            if (window.scrollY > 600) {
                                backToTop.style.opacity = '1';
                                backToTop.style.transform = 'translateY(0)';
                            } else {
                                backToTop.style.opacity = '0';
                                backToTop.style.transform = 'translateY(30px)';
                            }
                        }
                        
                        // Update active nav item
                        updateActiveNav();
                        
                        scrollTimer = null;
                    });
                }, { passive: true });
            }
            
            // ===== OPTIMIZED ACTIVE NAV UPDATE =====
            function updateActiveNav() {
                const sections = $$('.cosmic-chapter, .grand-cosmic-portal, .quantum-timeline');
                const navStars = $$('.nav-star');
                const scrollPos = window.scrollY + 150;
                
                let current = 'portal';
                sections.forEach(section => {
                    const sectionTop = section.offsetTop;
                    const sectionHeight = section.clientHeight;
                    
                    if (scrollPos >= sectionTop && scrollPos < sectionTop + sectionHeight) {
                        current = section.id || 'portal';
                    }
                });
                
                navStars.forEach(star => {
                    star.classList.remove('active');
                    if (star.getAttribute('href') === `#${current}`) {
                        star.classList.add('active');
                    }
                });
            }
            
            // ===== OPTIMIZED TIMELINE =====
            function initTimeline() {
                const timelineItems = $$('.timeline-item');
                if (!timelineItems.length) return;
                
                const observer = new IntersectionObserver((entries) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            entry.target.classList.add('visible');
                        }
                    });
                }, {
                    threshold: 0.1,
                    rootMargin: '50px 0px'
                });
                
                timelineItems.forEach(item => {
                    observer.observe(item);
                });
            }
            
            // ===== OPTIMIZED INTERACTIONS =====
            function initInteractions() {
                // Toggle insights
                $$('.insight-toggle').forEach(toggle => {
                    toggle.addEventListener('click', function() {
                        const insight = this.closest('.quantum-insight');
                        const content = insight.querySelector('.insight-content');
                        
                        content.classList.toggle('expanded');
                        this.textContent = content.classList.contains('expanded') ? '−' : '+';
                    }, { passive: true });
                });
                
                // Select interpretations
                $$('.interpretation-card').forEach(card => {
                    card.addEventListener('click', function() {
                        $$('.interpretation-card').forEach(c => c.classList.remove('selected'));
                        this.classList.add('selected');
                    }, { passive: true });
                });
                
                // Toggle completion
                $$('.step-completion').forEach(step => {
                    step.addEventListener('click', function() {
                        this.classList.toggle('completed');
                        this.textContent = this.classList.contains('completed') ? '✓ Completed' : 'Mark Complete';
                    }, { passive: true });
                });
            }
            
            // ===== OPTIMIZED PARTICLES =====
            function initParticles() {
                if (typeof particlesJS !== 'function') return;
                
                particlesJS("quantum-cosmos", {
                    particles: {
                        number: { 
                            value: window.innerWidth < 768 ? 60 : 120,
                            density: { enable: true, value_area: 800 }
                        },
                        color: { value: ["#00F5FF", "#FFD700", "#9D4EDD"] },
                        shape: { type: "circle" },
                        opacity: {
                            value: 0.7,
                            random: true,
                            anim: { enable: true, speed: 1, opacity_min: 0.3 }
                        },
                        size: {
                            value: 2,
                            random: true,
                            anim: { enable: true, speed: 2, size_min: 0.5 }
                        },
                        line_linked: {
                            enable: true,
                            distance: 150,
                            color: "#00F5FF",
                            opacity: 0.2,
                            width: 1
                        },
                        move: {
                            enable: true,
                            speed: 0.8,
                            direction: "none",
                            random: true,
                            straight: false,
                            out_mode: "out"
                        }
                    },
                    interactivity: {
                        detect_on: "canvas",
                        events: {
                            onhover: { enable: true, mode: "grab" },
                            onclick: { enable: true, mode: "push" }
                        }
                    },
                    retina_detect: true
                });
            }
            
            // ===== OPTIMIZED SCROLL EFFECTS =====
            function initScrollEffects() {
                const scrollProgress = $('.scroll-progress');
                if (!scrollProgress) return;
                
                window.addEventListener('scroll', () => {
                    const winScroll = document.body.scrollTop || document.documentElement.scrollTop;
                    const height = document.documentElement.scrollHeight - document.documentElement.clientHeight;
                    const scrolled = (winScroll / height) * 100;
                    scrollProgress.style.width = scrolled + '%';
                }, { passive: true });
            }
            
            // ===== INITIALIZE ON DOM READY =====
            if (document.readyState === 'loading') {
                document.addEventListener('DOMContentLoaded', initQuantumUniverse);
            } else {
                initQuantumUniverse();
            }
            
            // ===== EXPOSE PUBLIC API =====
            window.QuantumOdyssey = {
                refreshCache: () => {
                    cachedElements = {};
                    console.log('Quantum Odyssey cache refreshed');
                },
                
                scrollToSection: (sectionId) => {
                    const target = $(sectionId);
                    if (target) {
                        const yOffset = -80;
                        const y = target.getBoundingClientRect().top + window.pageYOffset + yOffset;
                        window.scrollTo({ top: y, behavior: 'smooth' });
                    }
                },
                
                toggleInsight: (insightIndex) => {
                    const insights = $$('.quantum-insight');
                    if (insights[insightIndex]) {
                        const toggle = insights[insightIndex].querySelector('.insight-toggle');
                        if (toggle) toggle.click();
                    }
                }
            };
            
        })();
        
        // ===== ADDITIONAL PERFORMANCE OPTIMIZATIONS =====
        // Preload critical resources
        const preloadLinks = [
            'https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/webfonts/fa-solid-900.woff2',
            'https://fonts.gstatic.com/s/inter/v12/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa2JL7SUc.woff2'
        ];
        
        preloadLinks.forEach(href => {
            const link = document.createElement('link');
            link.rel = 'preload';
            link.href = href;
            link.as = 'font';
            link.crossOrigin = 'anonymous';
            document.head.appendChild(link);
        });
        
        // Optimize first paint
        requestAnimationFrame(() => {
            document.documentElement.style.setProperty('--scroll-position', window.scrollY + 'px');
        });
    </script>
</body>
</html>
